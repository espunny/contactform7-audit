INSTRUCCIONES PARA DEBUGGING
=============================

1. ACTIVAR DEBUG EN WORDPRESS
   Edita wp-config.php y añade/modifica estas líneas ANTES de "/* That's all, stop editing! */":

   define('WP_DEBUG', true);
   define('WP_DEBUG_LOG', true);
   define('WP_DEBUG_DISPLAY', false);
   @ini_set('display_errors', 0);

2. UBICACIÓN DEL LOG
   Los errores se guardarán en: /wp-content/debug.log

3. PROBAR EL PLUGIN
   a) Desactiva y reactiva el plugin ContactForm7 Audit
   b) Verifica que Contact Form 7 esté activo
   c) Envía un formulario de prueba
   d) Revisa el archivo debug.log - deberías ver líneas como:
      "CFA: Registro guardado exitosamente. ID: X, Formulario: nombre_formulario"

4. VERIFICAR EN BASE DE DATOS
   - Accede a phpMyAdmin
   - Busca la tabla wp_contactform_audit (o tu prefijo)
   - Verifica que se estén creando registros nuevos

5. SI NO FUNCIONA
   Revisa en debug.log si aparece alguno de estos errores:
   - "CFA: No se pudo obtener el objeto submission"
   - "CFA: Error al guardar registro de auditoría"
   - Errores de PHP relacionados con CFA_

6. TEST RÁPIDO
   Ejecuta esto en la consola de navegador en la página con el formulario:
   
   console.log('CF7 activo:', typeof wpcf7 !== 'undefined');
   console.log('Script CFA cargado:', typeof jQuery !== 'undefined');

7. VERIFICAR QUE LOS HOOKS ESTÉN REGISTRADOS
   Instala el plugin "Query Monitor" y ve a la pestaña "Hooks" 
   busca "wpcf7_mail_sent" - debe aparecer "CFA_Form_Handler->capture_form_submission"

=============================
NUEVAS CARACTERÍSTICAS v1.0.0
=============================

✅ PURGAR BASE DE DATOS
   - Nuevo botón en "Zona Peligrosa" del panel admin
   - Elimina TODOS los registros de auditoría de forma irreversible
   - Requiere confirmación escribiendo "ELIMINAR"
   - Crea un nuevo hash génesis automáticamente
   - ⚠️ ADVERTENCIA: Esta acción NO se puede deshacer

✅ EXPLICACIÓN DE UTILIDAD
   - Panel admin incluye explicación de para qué sirve el sistema
   - Describe casos de uso: RGPD/GDPR, auditorías legales, consentimientos
   - Ayuda a entender el valor de la trazabilidad inmutable

✅ MEJORAS VISUALES
   - Iconos correctamente centrados verticalmente
   - Diseño "Zona Peligrosa" con advertencias visuales
   - Estilos mejorados para botones y notificaciones

=============================
CARACTERÍSTICAS COMPLETAS
=============================

✓ Hash chaining con SHA-256 inmutable
✓ Captura completa de datos de formularios CF7
✓ Texto de casillas de aceptación + estado (checked/unchecked)
✓ IP del usuario sin anonimizar
✓ User agent completo del navegador
✓ Cookies del dominio capturadas
✓ Resolución de pantalla del dispositivo
✓ Panel admin con estadísticas en tiempo real
✓ Verificación de integridad por chunks (optimizado)
✓ Exportación JSON por rango de fechas (hasta 10,000 registros)
✓ Purgar base de datos con confirmación crítica
✓ Desinstalación limpia automática
✓ Documentación completa en readme.txt

=============================
EMPAQUETAR PARA INSTALACIÓN
=============================

1. Desde PowerShell en la carpeta del plugin:
   Compress-Archive -Path * -DestinationPath contactform7-audit.zip -Force

2. O desde Explorador de Windows:
   - Selecciona TODOS los archivos y carpetas
   - Click derecho → Enviar a → Carpeta comprimida
   - Renombra a contactform7-audit.zip

3. Instalar en WordPress:
   - Plugins → Añadir nuevo → Subir plugin
   - Selecciona el ZIP y activa
